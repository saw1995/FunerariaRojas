
@{
    ViewData["Title"] = "Stock";
    Layout = "~/Views/Admin/Index.cshtml";
}

<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-1">
            <div class="col-sm-12">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active">Inline Charts</li>
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>

<section class="content">
    <div class="container-fluid">

        <div class="row">

            <div class="col-12">

                <div class="card">

                    <!-- /.card-header -->
                    <div class="card-body">

                        <div class="row mb-2">
                            <div class="col-12 col-md-6">
                                <h3>STOCK de productos</h3>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width: 10px">#</th>
                                        <th class="text-center" style="width: 100px">Código</th>
                                        <th class="text-center">Nombre</th>
                                        <th class="text-center">Descripción</th>
                                        <th class="text-center" style='width:50px;'>Cajón</th>
                                        <th style='width:50px;'></th>
                                    </tr>
                                </thead>

                                <tbody id="dtCategoria">
                                </tbody>

                            </table>
                        </div>
                    </div>
                    <!-- /.card-body -->

                </div>

            </div>
        </div>

    </div>
</section>

@section scripts{
    <script>

        $(document).ready(function () {
            listaCategorias();
        });

        function listaCategorias() {
            var parametros = {
                "estado": 1
            };

            var _url = "listaCategoriasByEstado";

            $.ajax({
                url: _url,
                type: "POST",
                data: parametros,
                success: function (data) {
                    let filas = "";
                    for (let i = 0; i <= data.length - 1; i++) {

                        let cajonValida = "<td class='project-state text-center'><span class='badge badge-success'>SÍ</span></td>";

                        if (data[i]["cajon"] == false) {
                            cajonValida = "<td class='project-state text-center'><span class='badge badge-danger'>NO</span></td>";
                        }

                        filas = filas +
                        "<tr>" +
                        "<td>" + (i + 1).toString() + "</td>" +
                        "<td class='text-center'>" + data[i]["id"] + "</td>" +
                        "<td>" + data[i]["nombre"] + "</td>" +
                        "<td>" + data[i]["descripcion"] + "</td>" +
                        cajonValida +
                        "<td class='text-right py-0 align-middle'>" +
                        "<div class='btn-group btn-group-sm' >" +

                        "<a href='javascript:void(0);' onclick='alertUsuario(" + data[i]["id"] + ")' " +
                        "class='btn btn-info'><i class='fas fa-pencil-alt'></i></a>" +

                        "<a href='javascript:void(0);' onclick='eliminarCategoria(" + data[i]["id"] + ")' " +
                        "class='btn btn-danger' > <i class='fas fa-trash'></i></a > "

                        "</div></td>" +
                        "</tr>"
                    }
                    document.getElementById("dtCategoria").innerHTML = filas;
                }
            });
        }

    </script>
}